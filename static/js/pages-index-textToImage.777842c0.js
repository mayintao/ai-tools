(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-textToImage"],{"0dd7":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToPath=function(e){return new Promise((function(t,a){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){e=e.split(",");var n=e[0].match(/:(.*?);/)[1],d=atob(e[1]),u=d.length,c=new Uint8Array(u);while(u--)c[u]=d.charCodeAt(u);return t((window.URL||window.webkitURL).createObjectURL(new Blob([c],{type:n})))}var f=e.split(",")[0].match(/data\:\S+\/(\S+);/);f?f=f[1]:a(new Error("base64 error"));var l=function(){return Date.now()+String(r++)}()+"."+f;if("object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")){s=wx.env.USER_DATA_PATH+"/"+l;wx.getFileSystemManager().writeFile({filePath:s,data:o(e),encoding:"base64",success:function(){t(s)},fail:function(e){a(e)}})}else a(new Error("not support"));else{var s="_doc/uniapp_temp/"+l;if(!function(e,t){for(var a=e.split("."),n=t.split("."),i=!1,o=0;o<n.length;o++){var r=a[o]-n[o];if(0!==r){i=r>0;break}}return i}("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL("_doc",(function(n){n.getDirectory("uniapp_temp",{create:!0,exclusive:!1},(function(n){n.getFile(l,{create:!0,exclusive:!1},(function(n){n.createWriter((function(n){n.onwrite=function(){t(s)},n.onerror=a,n.seek(0),n.writeAsBinary(o(e))}),a)}),a)}),a)}),a);var p=new plus.nativeObj.Bitmap(l);p.loadBase64Data(e,(function(){p.save(s,{},(function(){p.clear(),t(s)}),(function(e){p.clear(),a(e)}))}),(function(e){p.clear(),a(e)}))}}))},t.pathToBase64=function(e){return new Promise((function(t,a){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){if("function"===typeof FileReader){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=a,e.readAsDataURL(this.response)}},n.onerror=a,void n.send()}var o=document.createElement("canvas"),r=o.getContext("2d"),d=new Image;return d.onload=function(){o.width=d.width,o.height=d.height,r.drawImage(d,0,0),t(o.toDataURL()),o.height=o.width=0},d.onerror=a,void(d.src=e)}"object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus))?"object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){a(e)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}(e),(function(e){e.file((function(e){var n=new plus.io.FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){a(e)},n.readAsDataURL(e)}),(function(e){a(e)}))}),(function(e){a(e)}))}))};var i=n(a("fcf3"));function o(e){var t=e.split(",");return t[t.length-1]}a("5ef2"),a("bf0f"),a("7a76"),a("c9b5"),a("5c47"),a("2c10"),a("15d1"),a("d5c6"),a("5a56"),a("f074"),a("4db2"),a("c976"),a("4d8f"),a("7b97"),a("668a"),a("c5b7"),a("8ff5"),a("2378"),a("641a"),a("64e0"),a("cce3"),a("efba"),a("d009"),a("bd7d"),a("7edd"),a("d798"),a("f547"),a("5e54"),a("b60a"),a("8c18"),a("12973"),a("f991"),a("198e"),a("8557"),a("63b1"),a("1954"),a("1cf1"),a("18f7"),a("de6c"),a("dc89"),a("2425");var r=0},"73b1":function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,".uni-padding-wrap[data-v-067eaa16]{\n\t/* width:690rpx; */padding:0 %?30?%}.uni-common-mt[data-v-067eaa16]{margin-top:%?30?%}.content[data-v-067eaa16]{margin:%?30?%;display:flex;flex-direction:column;align-items:center;justify-content:center}.text-box[data-v-067eaa16]{margin-bottom:%?40?%;padding:%?40?% 0;display:flex;min-height:%?300?%;background-color:#fff;justify-content:center;align-items:center;text-align:center;font-size:%?30?%;color:#353535;line-height:1.8}.uni-title[data-v-067eaa16]{margin-top:%?40?%;font-size:%?30?%;font-weight:500;padding:%?20?% 0;line-height:1.5}.uni-common-pl[data-v-067eaa16]{padding-left:%?30?%}.uni-list[data-v-067eaa16]{background-color:#fff;position:relative;width:100%;display:flex;flex-direction:column}.uni-list-cell[data-v-067eaa16]{position:relative;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.uni-list-cell-left[data-v-067eaa16]{white-space:nowrap;font-size:%?28?%;padding:0 %?30?%}.uni-list-cell-db[data-v-067eaa16],\n.uni-list-cell-right[data-v-067eaa16]{flex:1}.text-area[data-v-067eaa16]{margin:%?30?%;width:90%;height:%?300?%;border:1px solid #ccc;border-radius:%?12?%;padding:%?20?%;font-size:%?36?%;line-height:1.8;background-color:#fdfdfd;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05)}.uni-result-wrapper[data-v-067eaa16]{height:%?300?%;width:80%;margin:%?20?%;background-color:#123fff}.uni-input[data-v-067eaa16]{height:auto;padding:%?15?% %?25?%;line-height:%?50?%;font-size:%?28?%;background:#fff;flex:1}\n\n/* textarea */.uni-textarea[data-v-067eaa16]{width:100%;background:#fff}.uni-textarea uni-textarea[data-v-067eaa16]{width:96%;padding:%?18?% 2%;line-height:1.6;font-size:%?28?%;height:%?150?%}.input-result[data-v-067eaa16]{height:auto;width:80%;margin:%?20?%;padding:%?20?%;font-size:%?26?%;background:#fff;color:#353535}\n\n/* 表单 */.uni-form-item[data-v-067eaa16]{display:flex;width:100%;padding:%?10?% 0}.uni-form-item .title[data-v-067eaa16]{padding:%?10?% %?25?%}.content[data-v-067eaa16]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.btn_translate_bg[data-v-067eaa16]{margin-top:%?40?%;width:70%;margin-left:%?40?%;margin-right:%?40?%;background-color:#128f94}.text-area[data-v-067eaa16]{display:flex;justify-content:center}.title[data-v-067eaa16]{font-size:%?36?%;color:#8f8f94}.result[data-v-067eaa16]{font-size:%?24?%;color:#128f94}.uni-btn-v[data-v-067eaa16]{margin:%?40?%;padding:%?10?% 0}.img-bg[data-v-067eaa16]{width:70%;margin:%?30?%;background-color:#fff}.imagead[data-v-067eaa16]{margin:%?20?%;width:70%;height:400px;background-color:#eee}",""]),e.exports=t},8814:function(e,t,a){"use strict";var n=a("ae8b"),i=a.n(n);i.a},"8cd0":function(e,t,a){"use strict";a.r(t);var n=a("f96a"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},ae8b:function(e,t,a){var n=a("73b1");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("97663cd2",n,!0,{sourceMap:!1,shadowMode:!1})},cfdc:function(e,t,a){"use strict";a.r(t);var n=a("e212"),i=a("8cd0");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("8814");var r=a("828b"),d=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"067eaa16",null,!1,n["a"],void 0);t["default"]=d.exports},e212:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-textarea",{staticClass:"text-area",attrs:{placeholder:"请输入文字",maxlength:"2000","auto-height":"false"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"img-bg"},[a("v-uni-image",{staticClass:"imagead",attrs:{src:e.imageResultPath},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewResultImage.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"uni-btn-v"},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doCreate.apply(void 0,arguments)}}},[e._v("生成")])],1)],1)],1)},i=[]},f96a:function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("0dd7"),i={data:function(){return{inputValue:"",imageResultPath:""}},onLoad:function(){},methods:{doCreate:function(){var e=this;uni.showLoading({title:"处理中..."}),uni.request({url:"https://yintao127-text-to-image.hf.space/ai/api_generate_images",method:"POST",header:{"Content-Type":"application/json"},data:{prompt:e.inputValue},timeout:6e5,success:function(t){uni.hideLoading(),console.log("后端返回：",t),t.data[0]&&(0,n.base64ToPath)("data:image/png;base64,"+t.data[0]).then((function(t){e.imageResultPath=t})).catch((function(e){console.error("失败：",e)}))},fail:function(e){uni.hideLoading(),console.log(e)}})},previewResultImage:function(){""!=this.imageResultPath&&uni.previewImage({urls:[this.imageResultPath]})}}};t.default=i}}]);